[
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html",
    "href": "blog/2023/01_23_henrico_parcels/index.html",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": "",
    "text": "A recent tweet showed the age of the buildings in Groningen, Netherlands super-imposed on LiDAR data for some perspective.\nThis got me thinking ‚Äì what would Henrico look like? I‚Äôm going to take the cheap way out and not mess with LiDAR at the moment, but the county provides their Tax Parcels and CAMA Data for easy download.\nThis is a pretty big file ‚Äì just under 121 thousand parcel outlines, with 84 different bits of information per property!"
  },
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html#enter-geoarrow",
    "href": "blog/2023/01_23_henrico_parcels/index.html#enter-geoarrow",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": "Enter: geoarrow",
    "text": "Enter: geoarrow\nI‚Äôve been interested in playing around with the geoarrow package since watching Dewey Dunnington‚Äôs presentation at the 2022 RStudio conference. It leverages the Apache Arrow platform, resulting in rapid out-of-memory subsetting and manipulation of spatial data. The Parquet format used by Arrow also does a great job at compression, resulting in a much smaller file to toss around. When compared to a shapefile (which necessitates lugging around a bunch of other files), this seems like a much better way to store and access a large file."
  },
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html#shp-to-.parquet",
    "href": "blog/2023/01_23_henrico_parcels/index.html#shp-to-.parquet",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": ".shp to .parquet",
    "text": ".shp to .parquet\nThe first step is to convert the provided shapefile into the arrow-readable parquet format. I‚Äôll do this using the sf and geoarrow packages:\n\nlibrary(sf)\nlibrary(geoarrow)\n\nhenrico <- st_read('tax_parcels_and_cama_data.shp')\nwrite_geoparquet(henrico, 'data/henrico_parcels.parquet')\n\nEast enough ‚Äì and switching from the shapefile to parquet reduced the file size by 70%!"
  },
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html#pulling-in-the-data",
    "href": "blog/2023/01_23_henrico_parcels/index.html#pulling-in-the-data",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": "Pulling in the data",
    "text": "Pulling in the data\nUsing the newly-formed parquet file, it‚Äôs straightforward to only select two of the 84(!) columns and drop any structures without a construction date or a date that isn‚Äôt reasonable (in the future or before the settlement of the county).\n\nlibrary(arrow)\nlibrary(dplyr)\n\nhc_parcels <-\n  open_dataset('data/henrico_parcels.parquet') |> \n  select(YEAR_BUILT, geometry) |> \n  filter(!is.na(YEAR_BUILT) & YEAR_BUILT > 1500 & YEAR_BUILT < 2100) |> \n  geoarrow_collect_sf()"
  },
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html#plot",
    "href": "blog/2023/01_23_henrico_parcels/index.html#plot",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": "Plot",
    "text": "Plot\nNow just a matter of plotting using ggplot2.\n\nlibrary(ggplot2)\n\nggplot(data = hc_parcels) +\n  geom_sf(aes(fill = YEAR_BUILT), lwd = 0, color = NA)+\n  scale_fill_viridis_c(option  = 'turbo') +\n  labs(fill = 'Year built') +\n  theme_dark() +\n  theme(legend.position = c(0.25, 0.25))\n\n\n\n\nThe structures built recently blend together in burnt red, while the older building really pop. What this really tells us, though, is that the majority of the development in Henrico County has happened since 1950 or so.\nIt makes sense that the number of structures built per year would be greater in, say, 2000 compared to 1700 ‚Äì homes are easier to build and we have a much greater population. In order to see the subtle patterns in development in recent years, we need to adjust the color scale to change more rapidly as time goes on.\nThis can be accomplished using the values argument to scale_fill_viridis_c. Values need to be on the 0-to-1 scale. I‚Äôm going to shift the breaks in the color scale toward the last 25% of years.\n\nggplot(data = hc_parcels) +\n  geom_sf(aes(fill = YEAR_BUILT), lwd = 0, color = NA)+\n  scale_fill_viridis_c(option  = 'turbo',\n                       values = c(0, 0.5, 0.75, 0.85, 0.95, 1)) +\n  labs(fill = 'Year built') +\n  theme_dark() +\n  theme(legend.position = c(0.25, 0.25))"
  },
  {
    "objectID": "blog/2023/01_23_henrico_parcels/index.html#so-what-does-this-show-us",
    "href": "blog/2023/01_23_henrico_parcels/index.html#so-what-does-this-show-us",
    "title": "Age of Henrico County Virginia‚Äôs structures",
    "section": "So, what does this show us?",
    "text": "So, what does this show us?\n\nThe West End has a structure on nearly every parcel. This is especially apparent when comparing to Varina, where the blank gray spaces signify a plot of land with no listed structure.\nThe outskirts of Richmond (the ‚Äúbite‚Äù in the middle) were developed heavily in the 1950s. The far West End, however, didn‚Äôt start to get developed until near 2000.\nThere‚Äôs a progressive structure to the development of the West End, as can be seen in the gradient of color."
  },
  {
    "objectID": "blog/2023/01_25_cbl_eel_essay/index.html",
    "href": "blog/2023/01_25_cbl_eel_essay/index.html",
    "title": "Elusive silver eel migrations detected in the Chesapeake mainstem for the first time",
    "section": "",
    "text": "Note: This short essay was originally posted in the December 2022 Chesapeake Biological Laboratory newsletter.\nWhen Sheila Eyler of the US Fish and Wildlife Service (USFWS) tagged 16 American eels 75 miles upstream of the Conowingo Dam she knew where they might end up ‚Äì in the middle of the Atlantic Ocean in the Sargasso Sea ‚Äì but whether they could traverse the major dams of the Susquehanna and how they would get there were still mysteries. Detections provided by the Chesapeake Biotelemetry Backbone, funded in part by the JES Avanti Foundation, have shown for the first time how these eels migrate out of the Bay.\nAmerican eels are born in the Sargasso Sea, hatching into transparent leptocephalus larvae while riding ocean currents into the mouth of the Chesapeake Bay. The larvae transform into glass eels and migrate upstream, where they live and grow as yellow eels for 5-20 years. When the eel is ready to spawn, they stop eating and turn into silver eels for their terminal trek back to the Sargasso Sea. Where, exactly, they go in the Sargasso is still unknown; when they spawn is only inferred from the presence of larvae.\nIdentifying when silver eels leave the Chesapeake may shed some light on this mysterious migration. For many years, we assumed the eels migrated between August and November ‚Äì it‚Äôs when scattered silver eels appeared in pots and pound nets and it‚Äôs when they‚Äôre known to migrate in New England. However, it now looks like silver eels leave the Chesapeake during winter months. As is the case with other unexpected discoveries (see Atlantic sturgeon: Not the ‚Äòghosts‚Äô I once thought they were, Bay Journal 2021), we were looking in the wrong place, at the wrong time, and with the wrong tools.\n\nEnter the Chesapeake Bay Biotelemetry Backbone: a broad partnership between the University of Maryland Center for Environmental Science, Maryland Department of Natural Resources, NOAA Chesapeake Bay Office, Smithsonian Environmental Research Center, and the Virginia Marine Resources Commission. The team aims to deploy biotelemetry arrays in a sustained, year-round manner that covers major portions of the Chesapeake Bay. Each array is located near ‚Äúpinch-points‚Äù in the Chesapeake, chosen to maximize chance encounters with electronically tagged fish. Most importantly, the array is constantly listening for fish ‚Äì even through the cold winter months ‚Äì and does away with the need to directly capture fishes such as the cryptic silver eel.\nIn the first year of Eyler‚Äôs eel tagging, the Chesapeake Biological Laboratory‚Äôs backbone array detected five tagged Susquehanna eels passing by the mouth of the Patuxent River, MD. The silver eels blew by on their way to tropical Sargasso latitudes in the dead of winter ‚Äì between late-December and mid-February ‚Äì rather than fall months as in New England. Further, their stalwart migration emerging from the Conowingo and other major dams is good news for conservation efforts to restore American eels to the Susquehanna River. With USFWS planning to tag 200 more silver eels in the next 2 years and sustained deployment of the Chesapeake Bay Biotelemetry Backbone, knowledge of the timing and extent of Chesapeake silver eel migrations will only increase."
  },
  {
    "objectID": "blog/2023/02_21_wkb/index.html",
    "href": "blog/2023/02_21_wkb/index.html",
    "title": "Creating a simple features object via well-known-binary vs using coordinates",
    "section": "",
    "text": "If you work with fish telemetry data on the east coast of the USA, chances are that you‚Äôre now at least tangentially related to the Ocean Tracking Network (OTN).\nThe Ocean Tracking Network houses their data on a GeoServer, which often uses PostgreSQL/PostGIS behind the scenes. These databases store their spatial data in a format called ‚Äúwell-known binary‚Äù ‚Äì as opposed to the human-readable ‚Äúwell-known text‚Äù you see in the output of an sf object.\nOTN data extracts export the WKB in a column called ‚Äúthe_geom‚Äù; it looks like a long string of numbers and letters. To investigate this, I‚Äôll use the data set from Trudel 2018.\nThe main difference here is that the_geom can contain all of the information we may need, like coordinates, geometry type (points? polygons? multipoints? MULTIPOLYGONS???), and coordinate reference system. The latitude and longitude columns are just text: we need to infer/assume all of the other information.\nIn this particular case, that‚Äôs pretty easy. The latitude/longitude combinations are representing deployed receivers (points) and the are almost certainly in WGS84 (EPSG 4326) as that‚Äôs the system most-commonly used by a handheld GPS. We can provide this information directly and convert the CSV into an sf object.\nThe information we provided (coordinates and a coordinate reference system) helped fill out the metadata in the header and the well-known text (WKT) representation of the points in the ‚Äúgeometry‚Äù column. The analogous well-known binary (WKB) is contained within ‚Äúthe_geom‚Äù column. At this point, the WKB are just character strings.\nWe can convert the WKB as well, but it necessitates us jumping through some strange hoops. First we need to make ‚Äúthe_geom‚Äù have a ‚ÄúWKB‚Äù class.\nWe can then convert this to a simple features collection via st_as_sfc. Note that you may have to pass the EWKB = T argument if you come across some WKB in the wild, as PostGIS can create two types of WKB: Extended WKB and ISO WKB. EWKB allows other dimensions (like depth) and embedding a spatial reference identifier (SRID). ISO WKB also allows other identifiers, but no SRID. OTN seems to use ISO WKB as there is no CRS associated with the data.\nTo complete the cycle, we will convert the column to a simple features collection, then set it as the geometry of the original dataset.\nSo, is there any advantage to jumping through these hoops? Let‚Äôs benchmark it.\nSure doesn‚Äôt seem like it. After 100 iterations, parsing the binary is about four times slower than using st_as_sf. This result, combined with the fact that the code is more confusing and a PostGIS database is likely not being utilized by OTN‚Äôs end-users, suggests that the column may not get much use. Converting to EWKB may provide more use via adding a CRS, but the changes in the back end to make this happen probably make it so ‚Äúthe juice ain‚Äôt worth the squeeze.‚Äù"
  },
  {
    "objectID": "blog/2023/02_21_wkb/index.html#references",
    "href": "blog/2023/02_21_wkb/index.html#references",
    "title": "Creating a simple features object via well-known-binary vs using coordinates",
    "section": "References",
    "text": "References\nTrudel, Marc. ‚ÄúA Pilot Study to Investigate the Migration of Atlantic Salmon Post-Smolts and Their Interactions with Aquaculture in Passamaquoddy Bay, New Brunswick, Canada.‚Äù Ocean Tracking Network, 2018. https://members.oceantrack.org/project?ccode=PBSM.\nThis issue on GitHub: https://github.com/r-spatial/sf/issues/745#issuecomment-389778839"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/index.html",
    "href": "blog/2023/03_07_coding_club_github_actions/index.html",
    "title": "Introduction to GitHub Actions",
    "section": "",
    "text": "This week, I wanted to talk to the Coding Club at UMCES about GitHub Actions. I had been messing around with them during the creation of the matos and otndo packages, and I started to realize how powerful the combination of R and GitHub actions could be. This exercise, however, made me remember that the quickest way to realize how little you understand of a topic is to attempt to teach it.\nThe presentation is attached."
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#what-is-github-actions",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#what-is-github-actions",
    "title": "Introduction to GitHub Actions",
    "section": "What is GitHub Actions?",
    "text": "What is GitHub Actions?\nGitHub Actions is ‚Äúa continuous integration and continuous delivery (CI/CD) platform that allows you to automate your build, test, and deployment pipeline.‚Äù\nhttps://docs.github.com/en/actions/learn-github-actions/understanding-github-actions"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#what-does-this-mean-for-me",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#what-does-this-mean-for-me",
    "title": "Introduction to GitHub Actions",
    "section": "What does this mean for me?",
    "text": "What does this mean for me?\nYou can automate the running of certain scripts, to do anything from\n\nBuilding a website\n\nhttps://github.com/quarto-dev/quarto-actions\nhttps://github.com/r-lib/actions/tree/v2/examples#build-pkgdown-site\n\nTesting your code on other operating systems\n\nhttps://github.com/r-lib/actions/tree/v2/examples#standard-ci-workflow\n\nScheduling a script to run\n\nWhat we‚Äôre doing today"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#servers-runners",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#servers-runners",
    "title": "Introduction to GitHub Actions",
    "section": "Servers (‚Äúrunners‚Äù)",
    "text": "Servers (‚Äúrunners‚Äù)\n\n\nWindows and Linux virtual machines:\n\n2-core CPU (x86_64)\n7 GB of RAM\n14 GB of SSD space\n\n\nmacOS virtual machines:\n\n3-core CPU (x86_64)\n14 GB of RAM\n14 GB of SSD space"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#servers-runners-1",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#servers-runners-1",
    "title": "Introduction to GitHub Actions",
    "section": "Servers (‚Äúrunners‚Äù)",
    "text": "Servers (‚Äúrunners‚Äù)\n\nMuch smaller/slower than SALMO/LOTA/ARION, BUT\n\n\n\nNeed to be on VPN\nCBL workstations are not web servers\nSALMO and LOTA are shared\nARION has individual credentials, so hard to collaborate"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#parts-of-a-gh-action-1",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#parts-of-a-gh-action-1",
    "title": "Introduction to GitHub Actions",
    "section": "Parts of a GH Action",
    "text": "Parts of a GH Action\n\nWorkflow\n\nMay contain multiple jobs\nContains information of what events trigger the workflow to start\n\nJobs\n\nMay contain multiple steps\nMost steps involve downloading/installing the necessary programs (R, R packages, etc.)\n\nSteps\n\nThe meat of the process"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#environments",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#environments",
    "title": "Introduction to GitHub Actions",
    "section": "Environments",
    "text": "Environments\n\nEnvironments are:\n\nshared between steps\nNOT shared between jobs\nNOT shared between workflows.\n\nEnvironment in a step takes precedence over that of the bigger job, which takes precedence over that of the workflow."
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#location",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#location",
    "title": "Introduction to GitHub Actions",
    "section": "Location",
    "text": "Location\n\nStored in a special ‚Äú.github‚Äù directory in your repository\nAnd then within a ‚Äúworkflows‚Äù directory\nSaved in a yaml (or yml) file"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#yaml",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#yaml",
    "title": "Introduction to GitHub Actions",
    "section": "YAML",
    "text": "YAML\n\nGH Actions are coded in YAML\n\n‚ÄúYet Another Markup Language‚Äù\n‚ÄúYAML Ain‚Äôt Markup Language‚Äù\n\nSpacing is VERY important in YAML\nUnfortunately, I haven‚Äôt really figured out the rules, but GitHub will yell at you if something is incorrect\nhttps://learnxinyminutes.com/docs/yaml/"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#workflow-info",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#workflow-info",
    "title": "Introduction to GitHub Actions",
    "section": "Workflow info",
    "text": "Workflow info\n\nName of the workflow (useful to keep track of things)\n\nname: my_workflow\n\nEvent triggers (there are a quite a few; these are my favorites)\n\non:\n  workflow_dispatch:\n  push:\n    branches: [main, my_feature_branch]\n  schedule:\n    - cron: \"30  9,17 * * 1-5\""
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#workflow-event-triggers",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#workflow-event-triggers",
    "title": "Introduction to GitHub Actions",
    "section": "Workflow: Event triggers",
    "text": "Workflow: Event triggers\n\n\n\nworkflow_dispatch\n\nadds a button that lets you run the workflow with a click\n\npush\n\nruns the workflow whenever you push commits to the named branch\n\n\n\n\nschedule\n\nrun at the designated ‚ÄúMIN HR DofMON MON DofWK‚Äù (UTC)\nuses the cron scheduler\nhttps://crontab.guru/\n‚Äú30 9,17 * * 1-5‚Äù\n\nRun at 9:30 & 17:30 every day of the month, every month, M-F"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#jobs",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#jobs",
    "title": "Introduction to GitHub Actions",
    "section": "Jobs",
    "text": "Jobs\n\nName of the job\nOS to run the job\n\nruns-on; usually ubuntu-latest\n\nEnvironmental variables\n\nusually always a GH token\nother secrets\n\n\njobs:\n  my-super-neat-job:\n    runs-on: ubuntu-latest\n    env:\n      GITHUB_PAT: ${{ secrets.GITHUB_TOKEN}}\n      MY_SECRET_PASSWORD: ${{ secrets.MIKES_PW }}"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-setting-it-up",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-setting-it-up",
    "title": "Introduction to GitHub Actions",
    "section": "Steps: Setting it up",
    "text": "Steps: Setting it up\n\nNested under jobs\nCan run your own program (run), or call others that have been developed (uses)\n\nhttps://github.com/r-lib/actions/tree/v2\nhttps://github.com/marketplace?type=actions\n\nFirst few are usually:\n\nCheck out repository\nInstall R\nInstall packages"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-setting-it-up-1",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-setting-it-up-1",
    "title": "Introduction to GitHub Actions",
    "section": "Steps: Setting it up",
    "text": "Steps: Setting it up\nsteps:\n  - name: Check out repository\n    uses: actions/checkout@v3\n    \n  - name: Set up R\n    uses: r-lib/actions/setup-r@v2\n    with:\n      use-public-rspm: true\n      \n  - name: Install packages\n    uses: r-lib/actions/setup-r-dependencies@v2\n    with:\n      packages: |\n        any::dplyr\n        any::lubridate\n\n\nThe vertical bar is a special character in YAML, allowing for a multi-line string"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-getting-it-done",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-getting-it-done",
    "title": "Introduction to GitHub Actions",
    "section": "Steps: Getting it done",
    "text": "Steps: Getting it done\nThe next few are usually where all of the fun stuff happens\n  - name: My first R script\n    run: Rscript \"do_the_thing.R\"\n    \n  - name: My next R commands\n    run: |\n      my_addition <- 2 + 2\n    shell: Rscript {0}\n    \n  - name: Show my variable\n    run: my_addition\n    shell: Rscript {0}\n\n\nYou can source an R script right in the run line, or have multiple separate lines and follow it up with calling R in the shell command"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-saving-the-result",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#steps-saving-the-result",
    "title": "Introduction to GitHub Actions",
    "section": "Steps: Saving the result",
    "text": "Steps: Saving the result\nWe usually want to do something with the result. If we want to save things, we need to commit it to the repository.\n  - name: Commit files\n    run: |\n      git config --local user.name actions-user\n      git config --local user.email \"actions@github.com\"\n      git add .\n      git commit -am \"GH ACTION did something on $(date)\"\n      git push origin main\n\n\nThis adds all files that were created (git add .) to the main branch (git push origin main)"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#permissions",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#permissions",
    "title": "Introduction to GitHub Actions",
    "section": "Permissions",
    "text": "Permissions\n\nLikely need to allow write permissions\n\nSettings > Actions > General > Worflow permissions > Read and write permissions\n\nCould also possibly do this in the Workflow, but I haven‚Äôt checked\nhttps://docs.github.com/en/actions/using-jobs/assigning-permissions-to-jobs"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#permissions-allow-writing",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#permissions-allow-writing",
    "title": "Introduction to GitHub Actions",
    "section": "Permissions: allow writing",
    "text": "Permissions: allow writing\nWorkflow level\non:\n  workflow_dispatch:\n\npermissions:\n  contents: write\nJob level\njob:\n  my_awesome_job:\n    permissions:\n      contents:\n        write"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#artifacts",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#artifacts",
    "title": "Introduction to GitHub Actions",
    "section": "Artifacts",
    "text": "Artifacts\n\nAllow sharing of data between jobs/workflows\nNeed to be uploaded/downloaded\nIf you want to keep things free:\n\nLast 90 days, at most\nAre 500 MB, at most"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#secrets",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#secrets",
    "title": "Introduction to GitHub Actions",
    "section": "Secrets",
    "text": "Secrets\n\nInformation you‚Äôd like to use in your script, but don‚Äôt want others to see\n\nUsernames/passwords needed to access certain information\n\nSecrets are encrypted\nCan be accessed as an environmental variable"
  },
  {
    "objectID": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#secrets-in-r",
    "href": "blog/2023/03_07_coding_club_github_actions/presentation/index.html#secrets-in-r",
    "title": "Introduction to GitHub Actions",
    "section": "Secrets (in R)",
    "text": "Secrets (in R)\nenv:\n  SUPERSECRET: ${{ secrets.my_saved_secret_on_GH }}"
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html",
    "href": "blog/2023/03_10_google_and_github_actions/index.html",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "",
    "text": "There are already a few blogs and presentations that outline the why and how of GitHub Actions and R:\nAnd also how to schedule R analysis to run on a schedule or connect with Google services:\nBecause of this, I‚Äôm going to skip right ahead to the part that always trips me up: connecting Google services like Google Drive and Google Sheets to an R script scheduled to run via GitHub Actions."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#so-you-want-to-automate-saving-things-in-a-google-sheet",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#so-you-want-to-automate-saving-things-in-a-google-sheet",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "So, you want to automate saving things in a Google Sheet?",
    "text": "So, you want to automate saving things in a Google Sheet?\nWhen scheduling some code to run with GitHub Actions, a common workflow has been to run some code on schedule using GitHub Actions, save the results to Google Sheets, and allow my boss/peers to leverage the collaborative aspect of Google Sheets to comments and interact with the data product. Recently, this has taken the form of scraping data from websites that are frequently updated or display some sort of ephemeral data.\nThe most-difficult part of the whole process for me, however, has been getting the Google Sheets/Google Drive permissions set up. I‚Äôve spent many hours failing at this, so this document is meant to leave a trail so we don‚Äôt have to fail twice."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#permissions-needed",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#permissions-needed",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Permissions needed",
    "text": "Permissions needed\nThe googledrive and googlesheets4 packages make it as easy as possible to interface with Google Drive and Google Sheets in R. Both leverage the gargle package to set up the security tokens needed to interface with all of the Google services.\nThe googledrive package uses the drive_auth function to interface with gargle and set up your authorization, while googlesheets4 uses gs4_auth. This process is easy, streamlined, and interactive ‚Äì it opens up a browser window, you log into your Google account and tell it ‚Äúyes, I want this to be able to access my files‚Äù, and that‚Äôs it! Unfortunately, if we‚Äôre running this in the cloud somewhere using GitHub Actions we‚Äôre not going to be there to click the button."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#google-cloud-platform",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#google-cloud-platform",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Google Cloud Platform",
    "text": "Google Cloud Platform\nBoth packages point to an article in gargle entitled ‚ÄúHow to get your own API credentials‚Äù. This does an excellent job of walking through the how and why; the section of interest to us is ‚ÄúService account token‚Äù.\nThe first step they outline is to go to the Google Cloud Platform website: https://console.cloud.google.com. Once you‚Äôre there, make sure you‚Äôre logged in to the correct account! Again, I emphasize:\nMAKE SURE YOU‚ÄôRE LOGGED IN TO THE CORRECT ACCOUNT!\nLook in the top right, and make sure the correct profile picture is staring back at you. I ran into many hours of frustration trying everything to get permissions to work and experiencing failure after frustrating failure. Then I found out that I had made the key in my personal account rather than my institutional account.ü§¶\nOnce you are logged in to the CORRECT account, create a new project (or select an exiting one) using the drop-down menu next to the ‚ÄúGoogleCloud‚Äù banner at the top."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#create-a-service-account-token",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#create-a-service-account-token",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Create a service account token",
    "text": "Create a service account token\nNow we‚Äôll create a service account token.\n\nClick the navigation menu, and select ‚ÄúIAM & Admin‚Äù, then ‚ÄúService Accounts‚Äù.\nAt the top, next to ‚ÄúService accounts‚Äù select ‚Äú+ CREATE SERVICE ACCOUNT‚Äù.\nAdd a name (I suggest something somewhat descriptive) and the ‚ÄúService account ID‚Äù section will autofill. Add a description if you desire.\nThis token will basically be a fake robot person ‚Äì you can select what projects and permissions this fake person will have, or you can skip it. You can change these later ‚Äì no biggy.\nClick ‚ÄúDONE‚Äù.\nClick your newly-created service account and go to the ‚ÄúKEYS‚Äù tab.\nClick ‚ÄúADD KEY‚Äù, ‚ÄúCreate new key‚Äù, select ‚ÄúJSON‚Äù, then ‚ÄúCREATE‚Äù.\nThis will download a file. Pay attention to where it goes!"
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#turn-on-the-google-sheetsdrive-api-for-your-gcp-project",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#turn-on-the-google-sheetsdrive-api-for-your-gcp-project",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Turn on the Google Sheets/Drive API for your GCP project",
    "text": "Turn on the Google Sheets/Drive API for your GCP project\nNow, we‚Äôll enable the Google Sheets and/or Google Drive API to allow the service account token to work.\n\nClick the menu, then ‚ÄúAPIs & Services‚Äù.\nSearch for Google Sheets in the search bar.\nSelect ‚ÄúGoogle Sheets API‚Äù from the results.\nClick ‚ÄúENABLE‚Äù.\nRepeat for Google Drive, if necessary."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#fake-google-robot-people",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#fake-google-robot-people",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Fake Google Robot People",
    "text": "Fake Google Robot People\nYou‚Äôve basically just created a fake Google robot person. You need to give the fake-Google-robot-person access to the document (like you would a real person) using the fake-Google-robot-person email that is listed within the Service Accounts section.\n\nIn the ‚ÄúService accounts‚Äù section we just visited, you can see your service account token listed by an email. It should be something like ‚ÄúYOUR-SERVICE-ACCOUNT-NAME@YOUR-GCP-PROJECT-NAME.iam.gserviceaccount.com‚Äù\nNavigate to your Google Drive/Sheet you want it to be able to access\nIf a Google Sheet, click ‚Äúshare‚Äù on the top right, paste in the robot-person email, and share it. For a Google Drive, navigate to the folder/item you‚Äôd like to share and do the same."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#add-your-token-to-github-action-secrets",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#add-your-token-to-github-action-secrets",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Add your token to GitHub Action secrets",
    "text": "Add your token to GitHub Action secrets\nWe‚Äôre nearing the end!\n\nGo into the GitHub repository that houses your GitHub Actions.\nClick ‚ÄúSettings‚Äù.\nUnder ‚ÄúSecurity‚Äù in the menu on the left side, select ‚ÄúSecrets and variables‚Äù and then ‚ÄúActions‚Äù.\nClick ‚ÄúNew repository secret‚Äù.\nCopy/paste the text in the file that was downloaded when you created your service account token and paste it into the ‚ÄúSecret‚Äù section.\nGive the secret a name.\nClick ‚ÄúAdd secret‚Äù.\n\nYour service access token can now be added to the .Renviron of the runner created for your GitHub Action. Don‚Äôt think too hard about what this means ‚Äì for us, it just means that we can access the token in a secret way using the name we just gave the secret using Sys.getenv('NAME_OF_MY_SECRET')."
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#coding-on-your-computer",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#coding-on-your-computer",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "Coding on your computer",
    "text": "Coding on your computer\nWhen working through the code on your computer, use the path argument to googledrive::drive_auth or googlesheets4::gs4_auth to tell R where you find your service access token.\n\n# for googledrive\ndrive_auth(path = 'path/to/my/service_token.json')\n\n# for googlesheets4\ngs4_auth(path = 'path/to/my/service_token.json')\n\nWhen you are ready to incorporate this into a GitHub Action, change this to Sys.getenv('NAME_OF_MY_SECRET').\n\ngs4_auth(path = Sys.getenv('NAME_OF_MY_SECRET'))"
  },
  {
    "objectID": "blog/2023/03_10_google_and_github_actions/index.html#github-actions",
    "href": "blog/2023/03_10_google_and_github_actions/index.html#github-actions",
    "title": "Connecting Google Sheets and GitHub Actions",
    "section": "GitHub Actions",
    "text": "GitHub Actions\nGoing over GitHub Actions and creating the needed workflow files is beyond the scope of this document.\nWorking back-to-front in the workflow YAML for web-scraping GitHub Action of mine, you can see that we have ask GitHub to pull the secret called ‚ÄúGDRIVE_PAT‚Äù (secret.GDRIVE_PAT) and assign it to a variable called GDRIVE_PAT (GDRIVE_PAT:) in our environment (env:).\njobs: \n  scrape_it:\n    runs-on: ubuntu-latest\n    env:\n      GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}\n      GDRIVE_PAT: ${{ secrets.GDRIVE_PAT }}\nThis stores our access token in a variable called ‚ÄúGDRIVE_PAT‚Äù in the server‚Äôs .Renvrion. Now, when we write gs4_auth(path = Sys.getenv('GDRIVE_PAT')), our GitHub Action is allowed to access our Google Sheet! SUCCESS!\nThe neatest part is that this server is created and destroyed during this session, and our secret is never put out in the open. Completely secure!"
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "Introduction to GitHub Actions\n\n\n\n\n\n\n\n\n\n\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nConnecting Google Sheets and GitHub Actions\n\n\n\n\n\n\n\nR\n\n\nWeb scraping\n\n\nGitHub Actions\n\n\nGoogle\n\n\n\n\n\n\n\n\n\n\n\nMar 10, 2023\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIntroduction to GitHub Actions\n\n\n\n\n\n\n\nR\n\n\nGitHub Actions\n\n\nCoding Club\n\n\n\n\n\n\n\n\n\n\n\nMar 7, 2023\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCreating a simple features object via well-known-binary vs using coordinates\n\n\n\n\n\n\n\nR\n\n\nFish migration\n\n\nbiotelemetry\n\n\nsf\n\n\nspatial\n\n\nPostGIS\n\n\n\n\n\n\n\n\n\n\n\nFeb 28, 2023\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\n  \n\n\n\n\nElusive silver eel migrations detected in the Chesapeake mainstem for the first time\n\n\n\n\n\n\n\nChesapeake\n\n\nFish migration\n\n\nbiotelemetry\n\n\n\n\n\n\n\n\n\n\n\nJan 25, 2023\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAge of Henrico County Virginia‚Äôs structures\n\n\n\n\n\n\n\nR\n\n\nHenrico\n\n\nWeb scraping\n\n\nLand use\n\n\ngeoarrow\n\n\narrow\n\n\n\n\n\n\n\n\n\n\n\nJan 22, 2023\n\n\nMike O‚ÄôBrien\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mike O'Brien",
    "section": "",
    "text": "University of Maryland, College Park | College Park, MD | Masters in Fisheries Science | August 2013\nUniversity of Miami | Coral Cables, FL | B.S. in Marine and Atmospheric Science | May 2009"
  },
  {
    "objectID": "index.html#experience",
    "href": "index.html#experience",
    "title": "Mike O'Brien",
    "section": "Experience",
    "text": "Experience\nUniversity of Maryland Center for Environmental Science | Faculty Research Assistant | Sept 2013 - present"
  },
  {
    "objectID": "research/index.html#current",
    "href": "research/index.html#current",
    "title": "Research",
    "section": "Current",
    "text": "Current\nCheck out our current research offshore of Ocean City, MD:\nhttps://tailwinds.umces.edu/\nWhat‚Äôs going on? A haiku:\n\nTurbines going up\nBut how will the fish react?\nObserve: pots and hooks"
  },
  {
    "objectID": "research/index.html#journal-articles",
    "href": "research/index.html#journal-articles",
    "title": "Research",
    "section": "Journal articles",
    "text": "Journal articles\n Secor, D.H., Bailey, H., Carroll, A., Lyubchich, V., O‚ÄôBrien, M.H.P., Wiernicki, C.J., 2021. Diurnal vertical movements in black sea bass (Centropristis striata): Endogenous, facultative, or something else? Ecosphere 12, e03616. https://doi.org/10.1002/ecs2.3616\n Secor, D.H., O‚ÄôBrien, M.H.P., Coleman, N., Horne, A., Park, I., Kazyak, D.C., Bruce, D.G., Stence, C., 2021. Atlantic Sturgeon Status and Movement Ecology in an Extremely Small Spawning Habitat: The Nanticoke River-Marshyhope Creek, Chesapeake Bay. Reviews in Fisheries Science & Aquaculture 1‚Äì20. https://doi.org/10.1080/23308249.2021.1924617\n O‚ÄôBrien, M.H.P., Secor, D.H., 2021. Influence of thermal stratification and storms on acoustic telemetry detection efficiency: a year-long test in the US Southern Mid-Atlantic Bight. Animal Biotelemetry 9, 8. https://doi.org/10.1186/s40317-021-00233-3\n Itakura, H., O‚ÄôBrien, M.H.P., Secor, D., 2021. Tracking oxy-thermal habitat compression encountered by Chesapeake Bay striped bass through acoustic telemetry. ICES Journal of Marine Science fsab009. https://doi.org/10.1093/icesjms/fsab009\n Secor, D.H., O‚ÄôBrien, M.H.P., Gahagan, B.I., Fox, D.A., Higgs, A.L., Best, J.E., 2020. Multiple spawning run contingents and population consequences in migratory striped bass Morone saxatilis. PLOS ONE 15(11): e0242797 https://doi.org/10.1371/journal.pone.0242797\n Rothermel, E.R., Balazik, M.T., Best, J.E., Fox, D.A., Gahagan, B.I., Haulsee, D.E., Higgs, A.L., O‚ÄôBrien, M.H.P., Oliver, M.J., Park, I.A., and Secor, D.H. 2020. Comparative migration ecology of striped bass and Atlantic sturgeon in the US Southern Mid-Atlantic Bight flyway. PLOS ONE 15(6): e0234442. https://doi.org/10.1371/journal.pone.0234442\n Secor, D.H., O‚ÄôBrien, M.H.P, Gahagan, B.I., Watterson, J.C., and Fox, D. 2020. Differential migration in Chesapeake Bay striped bass. PLOS ONE 15(5): e0233103. https://doi.org/10.1371/journal.pone.0233103\n Wiernicki, C.J., O‚ÄôBrien, M.H.P., Zhang F, Lyubchich V, Li M, Secor, D.H., 2020. The recurring impact of storm disturbance on black sea bass (Centropristis striata) movement behaviors in the Mid-Atlantic Bight. PLOS ONE 15(12): e0239919. https://doi.org/10.1371/journal.pone.0239919\n Secor, D.H., Zhang, F., O‚ÄôBrien, M.H.P. and Li, M. 2019. Ocean destratification and fish evacuation caused by a Mid-Atlantic tropical storm. ICES Journal of Marine Science, 76(2). https://doi.org/10.1093/icesjms/fsx241\n Wingfield, J.E., O‚ÄôBrien, M., Lyubchich, V., Roberts, J.J., Halpin, P.N., Rice, A.N. and Bailey, H., 2017. Year-round spatiotemporal distribution of harbour porpoises within and around the Maryland wind energy area. PLOS ONE, 12(5), p.e0176653 https://doi.org/10.1371/journal.pone.0176653"
  },
  {
    "objectID": "research/index.html#open-reports",
    "href": "research/index.html#open-reports",
    "title": "Research",
    "section": "Open reports",
    "text": "Open reports\nSecor, D, M O‚ÄôBrien, E Rothermel, C Wiernicki, and H Bailey. ‚ÄúMovement and Habitat Selection by Migratory Fishes within the Maryland Wind Energy Area and Adjacent Reference Sites.‚Äù Sterling (VA): U.S. Department of the Interior, Bureau of Ocean Energy Management, Office of Renewable Energy Programs, 2020. URL: https://espis.boem.gov/final%20reports/BOEM_2020-030.pdf"
  },
  {
    "objectID": "research/index.html#curated-datasets",
    "href": "research/index.html#curated-datasets",
    "title": "Research",
    "section": "Curated datasets",
    "text": "Curated datasets\nRothermel, Ella, Michael O‚ÄôBrien, and David Secor. ‚ÄúData from: Comparative Migration Ecology of Striped Bass and Atlantic Sturgeon in the US Southern Mid-Atlantic Bight Flyway.‚Äù Dryad, 2020. https://doi.org/10.5061/DRYAD.6HDR7SQX3.\nO‚ÄôBrien, Michael, David Secor, Benjamin Gahagan, Dewayne Fox, Amanda Higgs, and Jessica Best. ‚ÄúData from: Multiple Spawning Run Behavior and Population Consequences in Migratory Striped Bass Morone Saxatilis.‚Äù Dryad, 2020. https://doi.org/10.5061/DRYAD.6HDR7SQXT."
  },
  {
    "objectID": "research/packages.html",
    "href": "research/packages.html",
    "title": "Packages",
    "section": "",
    "text": "matos: An R API package for the Mid-Atlantic Acoustic Telemetry Observing System - https://matos.obrien.page\notndo: A package to understand OTN data - https://otndo.obrien.page\nTelemetryR: An R API package for the Atlantic Cooperative Telemetry (ACT) Network - https://github.com/mhpob/TelemetryR"
  },
  {
    "objectID": "rugby/2023/east-demographics/index.html#geographic-unions-gus",
    "href": "rugby/2023/east-demographics/index.html#geographic-unions-gus",
    "title": "East Demographics",
    "section": "Geographic Unions (GUs)",
    "text": "Geographic Unions (GUs)"
  },
  {
    "objectID": "rugby/index.html",
    "href": "rugby/index.html",
    "title": "Rugby",
    "section": "",
    "text": "Former:\n\nUSA Rugby National Panel (2016-2020)\nWorld Rugby 7s (2016-2018)\nMajor League Rugby (2018-2021)\n\nCurrent:\n\nPresident of the Mid-Atlantic Rugby Referees\nMember of the Potomac Society of Rugby Football Referees\n\n\n\n\n\n\n\n\n\nEast Demographics\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\nNo matching items"
  }
]